<!DOCTYPE html>
<html>
    <head>
        <title>Capture The Glag Game!</title> 
        <style>
            canvas {
                border: 1px solid black;
                background-color: whitesmoke;
            }            
        </style>
    </head>
    <body style= "background-color: #B0C4DE";>
        <p style="font-family: Arial, Helvetica, sans-serif; font-size: 15px;">Remaining Time: 300 seconds</p>
        <canvas id="canvas" ></canvas>
        <script>

            (function() {
                var requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
                window.requestAnimationFrame = requestAnimationFrame;
            })();
    
            //variables
            var player;
            var pwidth = 5;
            var pheight = 5;
            var px = 6;
            var py = 240;
            var canvas = document.getElementById("canvas");
            var ctx = canvas.getContext("2d");
            var width = 960;
            var height = 640;
            canvas.width = width;
            canvas.height = height;
            var keys = [];
            var gravity = 0.5;
            var jumping = false;
            var timer = 300;

            //ctx.fillRect(px, py, pwidth, pheight);

            var platforms = {
                start : function() {
                    //making the platforms
                    //red team starting point and red flag start point
                    //ctx.beginPath();
                    ctx.fillStyle = "red";
                    ctx.fillRect(0,240,100,10);
                    //Flag
                    ctx.fillRect(10,209,10,30)
                    //blue team starting point and blue flag start point
                    ctx.fillStyle = "blue";
                    ctx.fillRect(860,240,100,10);
                    //Flag
                    ctx.fillRect(940,209,10,30)

                    //Making the platforms
                    ctx.fillStyle = "black";
                    ctx.fillRect(140,340,75,10);
                    ctx.fillRect(745,340,75,10);
                    ctx.fillRect(0,540,75,10);
                    ctx.fillRect(885,540,75,10);
                    ctx.fillRect(442.5,490,75,10);
                    ctx.fillRect(442.5,340,75,10);
                    ctx.fillRect(140,440,75,10);
                    ctx.fillRect(745,440,75,10);
                    ctx.fillRect(291.25,390,75,10);
                    ctx.fillRect(593.75,390,75,10);
                }
            }

            var updatePlayer = {
                start : function() {
                    if (px >= width-pwidth) {
                        px = width- pwidth;
                    } else if (px <= 0) {         
                        px = 0;     
                    } else if(py >= height-pheight){
                        py = height - pheight;
                        player.jumping = false;
                    } else if (py <=0){
                        py = 0;
                    }
                    ctx.clearRect(0,0,width,height);
                    ctx.fillStyle = "red";
                    ctx.fillRect(px, py, pwidth, pheight);
                    platforms.start();
                }
            }
            
            //game function and making the platforms
            function update() {

                // check keys
                if (keys[38]) {
                    // up arrow
                    py = py -1;
                    pwidth = 5;
                    pheight = 5;
                    jumping = true;
                }
                if (keys[39]) {
                    // right arrow
                    px = px + 1;
                    pwidth = 5;
                    pheight = 5;
                }                              
                if (keys[37]) { 
                    //left arrow
                    px = px -1;
                    pwidth = 5;
                    pheight = 5;
                }

                if (jumping) {
                    py = py + gravity;
                }


                updatePlayer.start();

                requestAnimationFrame(update);
            }
            
            document.body.addEventListener("keydown", function(e) {
                keys[e.keyCode] = true;
            });
 
            document.body.addEventListener("keyup", function(e) {
                keys[e.keyCode] = false;
            });    
                
            window.addEventListener("load", function(){
                update();
            });   
                
        </script>
    <p style="font-family: Arial, Helvetica, sans-serif; font-size: 15px;">My Team Score: </p>
    <p style="font-family: Arial, Helvetica, sans-serif; font-size: 15px;">Opponent Team Score: </p>
    <p> </p>
    <p style="font-family: Arial, Helvetica, sans-serif; font-size: 12px;">Game Instructions:</p>
    <p style="font-family: Arial, Helvetica, sans-serif; font-size: 10px;">up arrow to jump</p>
    <p style="font-family: Arial, Helvetica, sans-serif; font-size: 10px;">left right arrows to move left and right</p>
    <p style="font-family: Arial, Helvetica, sans-serif; font-size: 10px;">space to freeze other players</p>
    </body>
</html>
